<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>XTV Time Clock + Invoice Builder</title>

  <!-- ‚úÖ iframe buster: ensures app runs top-level (not inside GoDaddy iframe) -->
  <script>
    (function () {
      try {
        if (window.top !== window.self) {
          window.top.location.href = window.location.href;
        }
      } catch (e) {
        window.open(window.location.href, '_blank', 'noopener,noreferrer');
      }
    })();
  </script>

  <!-- ‚úÖ include html2pdf -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
    integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <style>
    body { font-family:'Inter',sans-serif; background:#fff; color:#0f172a; margin:0; padding:0; }
    .kicker { display:inline-block; background:linear-gradient(135deg,#0072ff,#00c6ff); color:#fff;
      font-weight:800; padding:10px 20px; border-radius:999px; margin:20px 0; }
    .btn { background:linear-gradient(90deg,#0072ff,#00c6ff); color:#fff; border:none;
      border-radius:999px; padding:10px 16px; font-weight:700; cursor:pointer; margin:5px; }
    .btn:hover { transform:translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.12); }
    .wrap { max-width:1200px; margin:0 auto; padding:20px; }
    table { border-collapse:collapse; width:100%; }
    th, td { border:1px solid #e5e7eb; padding:8px; text-align:left; }
    th { background:#f1f5f9; }
    .modal { position:fixed; inset:0; background:rgba(15,23,42,.6); display:none;
      align-items:center; justify-content:center; z-index:9999; padding:20px; }
    .modal .box { background:#fff; padding:20px; border-radius:16px; max-width:900px; width:95%; }
    @media print {
      body * { visibility:hidden; }
      .modal, .modal * { visibility:visible; }
      .modal { position:static; background:#fff; }
    }
  </style>
</head>
<body>

  <div class="wrap">
    <div class="kicker">XTV Time Clock + Invoice Builder</div>
    <h3>Track hours by Employee, Job & Location ‚Äî then invoice in one click</h3>

    <div>
      <button id="tcAddRow" class="btn">‚ûï Add Row</button>
      <button id="tcInvoice" class="btn">üßæ Generate Invoice</button>
      <button id="tcDownload" class="btn">‚¨áÔ∏è Download PDF</button>
    </div>

    <table id="tcTable">
      <thead>
        <tr><th>Employee</th><th>Job</th><th>Location</th><th>Hours</th></tr>
      </thead>
      <tbody id="tcBody"></tbody>
    </table>
  </div>

  <!-- ‚úÖ Invoice Modal -->
  <div class="modal" id="tcModal">
    <div class="box" id="invoiceBox">
      <h2>Invoice</h2>
      <p id="invoiceContent">Example invoice details will appear here...</p>
      <button id="closeModal" class="btn">Close</button>
    </div>
  </div>

  <script>
    const body = document.getElementById('tcBody');
    const modal = document.getElementById('tcModal');
    const invoiceBox = document.getElementById('invoiceBox');

    document.getElementById('tcAddRow').addEventListener('click', () => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td contenteditable="true">John Doe</td>
        <td contenteditable="true">Consulting</td>
        <td contenteditable="true">NY</td>
        <td contenteditable="true">8</td>`;
      body.appendChild(tr);
    });

    document.getElementById('tcInvoice').addEventListener('click', () => {
      modal.style.display = 'flex';
      document.getElementById('invoiceContent').innerText =
        'Invoice generated from your time entries.';
    });

    document.getElementById('closeModal').addEventListener('click', () => {
      modal.style.display = 'none';
    });

    document.getElementById('tcDownload').addEventListener('click', () => {
      const opt = {
        margin: 0.5,
        filename: 'invoice.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(invoiceBox).save();
    });
  </script>
</body>
</html>
